"use strict";var ko=require("knockout"),console=require("console");ko.bindingHandlers.ifSubs={cloneNodes:function(e,t){for(var i=0,r=e.length,n=[];r>i;i++){var o=e[i].cloneNode(!0);n.push(t?ko.cleanNode(o):o)}return n},init:function(e,t,i,r,n){var o,a,s=t();return"undefined"==typeof s.data.subsCount&&ko.extenders.subscriptionsCount(s.data),ko.computed(function(){var l,d,c,i=ko.utils.unwrapObservable(t().data.subsCount),r=!a;c=-("undefined"!=typeof t().gutter?t().gutter:1),l=i+(o?c:0)>=ko.utils.unwrapObservable(s.threshold),"undefined"!=typeof t().not&&t().not&&(l=!l),d=r||l!==o,d&&(r&&ko.computedContext.getDependenciesCount()&&(a=ko.bindingHandlers.ifSubs.cloneNodes(ko.virtualElements.childNodes(e),!0)),l?(r||ko.virtualElements.setDomNodeChildren(e,ko.bindingHandlers.ifSubs.cloneNodes(a)),ko.applyBindingsToDescendants(n,e)):ko.virtualElements.emptyNode(e),o=l)},null,{disposeWhenNodeIsRemoved:e}),{controlsDescendantBindings:!0}}},ko.virtualElements.allowedBindings.ifSubs=!0;var beforeSubscriptionProp,afterSubscriptionProp;if("function"==typeof ko.subscription&&"undefined"!=typeof ko.isWritableObservable)beforeSubscriptionProp="beforeSubscriptionAdd",afterSubscriptionProp="afterSubscriptionRemove";else if("3.2.0"==ko.version)beforeSubscriptionProp="va",afterSubscriptionProp="nb";else if("3.3.0"==ko.version)beforeSubscriptionProp="ja",afterSubscriptionProp="ua";else if("3.4.0"==ko.version)beforeSubscriptionProp="sa",afterSubscriptionProp="Ia";else{if("3.4.1"!=ko.version)throw"Unsupported minimized Knockout version "+ko.version+" (supported DEBUG or minimized 3.2.0 ... 3.4.1)";beforeSubscriptionProp="sa",afterSubscriptionProp="Ia"}ko.extenders.subscriptionsCount=function(e,t,i){if("undefined"==typeof e.subsCount){e.subsCount=ko.observable(e.getSubscriptionsCount()).extend({notify:"always"});var r=e[beforeSubscriptionProp],n=e[afterSubscriptionProp];e[beforeSubscriptionProp]=function(n){r&&r.call(e,n);var o=e.getSubscriptionsCount()+1;("undefined"==typeof t||o==t||"undefined"==typeof i||o==i)&&e.subsCount(o)},e[afterSubscriptionProp]=function(r){n&&n.call(e,r);var o=e.getSubscriptionsCount();("undefined"==typeof t||o==t||"undefined"==typeof i||o==i)&&e.subsCount(o)}}else console.log("already applied subscriptionCount to observable");return null};