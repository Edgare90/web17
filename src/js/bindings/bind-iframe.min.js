"use strict";var ko=require("knockout"),console=require("console"),addScriptTemplate=function(e,t,i){var r=e.createElement("script");return r.setAttribute("type","text/html"),r.setAttribute("id",t),r.text=i,e.body.appendChild(r),r};ko.bindingHandlers.bindIframe={tpl:'<!DOCTYPE html>\r\n<html>\r\n<head>\r\n</head>\r\n<body><div data-bind="block: content"></div></body>\r\n</html>\r\n',init:function(e,t){function i(i){try{var r=e.contentDocument;r.open(),r.write(ko.bindingHandlers.bindIframe.tpl),r.close();try{var n=r.body;if(n){for(var o=e.contentWindow.parent.document.getElementsByTagName("script"),a=0;a<o.length;a++)"text/html"==o[a].getAttribute("type")&&o[a].getAttribute("id")&&addScriptTemplate(r,o[a].getAttribute("id"),o[a].innerHTML);var s=r.getElementsByTagName("HTML");ko.utils.domNodeDisposal.addDisposeCallback(e,function(){ko.cleanNode(s[0]||n)}),ko.applyBindings(t(),s[0]||n)}else console.log("no iframedoc",i)}catch(l){throw console.log("error reading iframe.body",l,i),l}}catch(l){throw console.log("error reading iframe contentDocument",l,i),l}}i("first call")}};