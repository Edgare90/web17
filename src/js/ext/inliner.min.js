"use strict";var console=require("console"),$=require("jquery"),inlineDocument=require("juice/lib/inline")({}).inlineDocument,inlinerPlugin=function(e){e.inline=function(e){$("[style]:not([replacedstyle])",e).each(function(e,t){var i=$(t);i.attr("replacedstyle",i.attr("style"))});var t=[];$('style[data-inline="true"]',e).each(function(e,i){var r=$(i).html();r=r.replace(/<!-- ko ((?!--).)*? -->/g,""),r=r.replace(/<!-- \/ko -->/g,""),t.push(r),$(i).removeAttr("data-inline")});var i=t.join("\n"),r=function(t,i){return"undefined"==typeof i&&(i=e),$(t,i)};r.root=function(){return $(":root",e)},inlineDocument(r,i,{styleAttributeName:"replacedstyle"})}};module.exports=inlinerPlugin;