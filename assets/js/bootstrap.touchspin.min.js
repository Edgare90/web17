!function(e){"use strict";e.fn.TouchSpin=function(t){var r={min:0,max:100,initval:"",step:1,decimals:0,stepinterval:100,forcestepdivisibility:"round",stepintervaldelay:500,prefix:"",postfix:"",prefix_extraclass:"",postfix_extraclass:"",booster:!0,boostat:10,maxboostedstep:!1,mousewheel:!0,buttondown_class:"btn btn-default",buttonup_class:"btn btn-default"};return this.each(function(){function m(){if(!i.data("alreadyinitialized")){if(i.data("alreadyinitialized",!0),!i.is("input"))return void console.log("Must be an input.");y(),h(),D(),w(),_(),C(),E()}}function h(){""!==a.initval&&""===i.val()&&i.val(a.initval)}function b(e){g(e),D();var t=Number(s.input.val());s.input.val(t.toFixed(a.decimals))}function y(){a=e.extend({},r,o,t)}function g(t){a=e.extend({},a,t)}function w(){var t=i.val(),r=i.parent();""!==t&&(t=Number(t).toFixed(a.decimals)),i.data("initvalue",t).val(t),i.addClass("form-control"),e("<style type='text/css'>.bootstrap-touchspin-prefix:empty,.bootstrap-touchspin-postfix:empty{display:none;}</style>").appendTo("head"),r.hasClass("input-group")?x(r):k()}function x(t){t.addClass("bootstrap-touchspin");var s,v,r=i.prev(),o=i.next(),c='<span class="input-group-addon bootstrap-touchspin-prefix">'+a.prefix+"</span>",l='<span class="input-group-addon bootstrap-touchspin-postfix">'+a.postfix+"</span>";r.hasClass("input-group-btn")?(s='<button class="'+a.buttondown_class+' bootstrap-touchspin-down" type="button">-</button>',r.append(s)):(s='<span class="input-group-btn"><button class="'+a.buttondown_class+' bootstrap-touchspin-down" type="button">-</button></span>',e(s).insertBefore(i)),o.hasClass("input-group-btn")?(v='<button class="'+a.buttonup_class+' bootstrap-touchspin-up" type="button">+</button>',o.prepend(v)):(v='<span class="input-group-btn"><button class="'+a.buttonup_class+' bootstrap-touchspin-up" type="button">+</button></span>',e(v).insertAfter(i)),e(c).insertBefore(i),e(l).insertAfter(i),n=t}function k(){var t='<div class="input-group bootstrap-touchspin"><span class="input-group-btn"><button class="'+a.buttondown_class+' bootstrap-touchspin-down" type="button">-</button></span><span class="input-group-addon bootstrap-touchspin-prefix">'+a.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+a.postfix+'</span><span class="input-group-btn"><button class="'+a.buttonup_class+' bootstrap-touchspin-up" type="button">+</button></span></div>';n=e(t).insertBefore(i),e(".bootstrap-touchspin-prefix",n).after(i),i.hasClass("input-sm")?n.addClass("input-group-sm"):i.hasClass("input-lg")&&n.addClass("input-group-lg")}function _(){s={down:e(".bootstrap-touchspin-down",n),up:e(".bootstrap-touchspin-up",n),input:e("input",n),prefix:e(".bootstrap-touchspin-prefix",n).addClass(a.prefix_extraclass),postfix:e(".bootstrap-touchspin-postfix",n).addClass(a.postfix_extraclass)}}function C(){i.on("keydown",function(e){var t=e.keyCode||e.which;38===t?("up"!==f&&(j(),T()),e.preventDefault()):40===t&&("down"!==f&&(F(),P()),e.preventDefault())}),i.on("keyup",function(e){var t=e.keyCode||e.which;38===t?q():40===t&&q()}),i.on("blur",function(){D()}),s.down.on("keydown",function(e){var t=e.keyCode||e.which;(32===t||13===t)&&("down"!==f&&(F(),P()),e.preventDefault())}),s.down.on("keyup",function(e){var t=e.keyCode||e.which;(32===t||13===t)&&q()}),s.up.on("keydown",function(e){var t=e.keyCode||e.which;(32===t||13===t)&&("up"!==f&&(j(),T()),e.preventDefault())}),s.up.on("keyup",function(e){var t=e.keyCode||e.which;(32===t||13===t)&&q()}),s.down.on("mousedown touchstart",function(e){F(),P(),e.preventDefault(),e.stopPropagation()}),s.up.on("mousedown touchstart",function(e){j(),T(),e.preventDefault(),e.stopPropagation()}),s.up.on("mouseout touchleave touchend touchcancel",function(e){f&&(e.stopPropagation(),q())}),s.down.on("mouseout touchleave touchend touchcancel",function(e){f&&(e.stopPropagation(),q())}),s.down.on("mousemove touchmove",function(e){f&&(e.stopPropagation(),e.preventDefault())}),s.up.on("mousemove touchmove",function(e){f&&(e.stopPropagation(),e.preventDefault())}),e(document).on("mouseup touchend touchcancel",function(e){f&&(e.preventDefault(),q())}),e(document).on("mousemove touchmove scroll scrollstart",function(e){f&&(e.preventDefault(),q())}),a.mousewheel&&i.on("mousewheel DOMMouseScroll",function(e){var t=e.originalEvent.wheelDelta||-e.originalEvent.detail;e.stopPropagation(),e.preventDefault(),0>t?F():j()})}function E(){i.on("touchspin.uponce",function(){q(),j()}),i.on("touchspin.downonce",function(){q(),F()}),i.on("touchspin.startupspin",function(){T()}),i.on("touchspin.startdownspin",function(){P()}),i.on("touchspin.stopspin",function(){q()}),i.on("touchspin.updatesettings",function(e,t){b(t)})}function S(e){switch(a.forcestepdivisibility){case"round":return(Math.round(e/a.step)*a.step).toFixed(a.decimals);case"floor":return(Math.floor(e/a.step)*a.step).toFixed(a.decimals);case"ceil":return(Math.ceil(e/a.step)*a.step).toFixed(a.decimals);default:return e}}function D(){var e,t,r;e=i.val(),""!==e&&(a.decimals>0&&"."===e||(t=parseFloat(e),isNaN(t)&&(t=0),r=t,t.toString()!==e&&(r=t),t<a.min&&(r=a.min),t>a.max&&(r=a.max),r=S(r),Number(e).toString()!==r.toString()&&(i.val(r),i.trigger("change"))))}function M(){if(a.booster){var e=Math.pow(2,Math.floor(p/a.boostat))*a.step;return a.maxboostedstep&&e>a.maxboostedstep&&(e=a.maxboostedstep,v=Math.round(v/e*e)),Math.max(a.step,e)}return a.step}function j(){D(),v=parseFloat(s.input.val()),isNaN(v)&&(v=0);var e=v,t=M();v+=t,v>a.max&&(q(),v=a.max,i.trigger("touchspin.max")),s.input.val(Number(v).toFixed(a.decimals)),e!==v&&i.trigger("change")}function F(){D(),v=parseFloat(s.input.val()),isNaN(v)&&(v=0);var e=v,t=M();v-=t,v<a.min&&(q(),v=a.min,i.trigger("touchspin.min")),s.input.val(v.toFixed(a.decimals)),e!==v&&i.trigger("change")}function P(){q(),p=0,f="down",d=setTimeout(function(){c=setInterval(function(){p++,F()},a.stepinterval)},a.stepintervaldelay)}function T(){q(),p=0,f="up",u=setTimeout(function(){l=setInterval(function(){p++,j()},a.stepinterval)},a.stepintervaldelay)}function q(){clearTimeout(d),clearTimeout(u),clearInterval(c),clearInterval(l),p=0,f=!1}var a,n,s,v,c,l,d,u,i=e(this),o=i.data(),p=0,f=!1;m()})}}(jQuery);